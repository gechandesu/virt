# V language binding for libvirt native C API

This module allows you to use libvirt in [V](https://vlang.io) programs.

## Status

WIP.

> [!WARNING]
> This is an experimental module. Not ready for production use.

libvirt C API coverge is super low for now.

## Docs

Any function has a link to corresponding libvirt documentation in comment.

You can locally generate HTML docs and serve it via command:

```
v doc -f html -m . && v -http -d http_folder=_docs
```

Run `v doc .` to see autogenerated docs in the terminal.

Also see examples in `examples` dir in the source code repository.

## About this bindings

This bindings is mostly auto-generated. Files with the `_generated.c.v` suffix
are generated automatically based on the libvirt C API XML specification
provided via pkg-config. Other parts of this library are written by hand.

Generation of C wrappers and V code is done by the `generate.vsh` script.
It uses `symbols-ignore` file to select the symbols for which code will be
generated. Any symbol mentioned in this file will be ignored. See comments in
[symbols-ignore](symbols-ignore) and [generate.vsh](generate.vsh)
source code for details.

Not all code can be easily generated automatically. generate.vsh does very
simple conversions, it is not very smart. Therefore, any symbols that it cannot
convert are easier to write manually and add to symbols-ignore so that
generate.vsh does not try to generate them.

Since libvirt has a very large API and usually only a small number of its
capabilities are used, I decided to add most of the library symbols to
symbols-ignore. Gradually improving the generator and adding functions manually
this binding should reach 100% coverage of the libvirt C API. Unshtil then
he binding is considered experimental.

Run `./make.vsh` or `v run make.vsh` to generate bindings.

## Symbol names

The symbol names and module structure have been changed to better match the V
code style. This library is very similar to the Go bindings.

Symbol names are transformed by following rules:

* `vir${Name}` prefix is removed from function and type names.

* Case is changed from camelCase to snake\_case.

* Constant names are converted to lower case and the `VIR_` prefix is removed.

Also some symbols like `vDomainLookupByName` are renamed to `lookup_domain_by_name`
and so on.

## License

`LGPL-3.0-or-later`

See [COPYING](COPYING) and [COPYING.LESSER](COPYING.LESSER) for information.
